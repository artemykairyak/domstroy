function hideModal(t){t.animate({opacity:"0"},200,function(){t.addClass("modal--disabled")})}function showModal(t){t.removeClass("modal--disabled"),t.css({opacity:"0"}),t.animate({opacity:"1"},200)}function showOverlay(){$(".overlay").removeClass("overlay--disabled"),$(".overlay").animate({opacity:"0.4"},200),$("body").addClass("blur-enadled"),$("body").removeClass("blur-disabled")}function hideOverlay(){return $(".modal__agreement").hasClass("modal--disabled")||$(".modal__callback").hasClass("modal--disabled")?($(".modal__callback").hasClass("modal--disabled")?$(".modal__services").hasClass("modal--disabled")?hideModal($(".modal")):$(".modal__services").animate({right:"-100vw",opacity:"0"},200,function(){$(".modal__services").addClass("modal--disabled")}):$(".modal__callback").animate({opacity:"0",top:"-50vh"},200,function(){$(this).addClass("modal--disabled")}),$(".overlay").animate({opacity:"0"},200,function(){$(this).addClass("overlay--disabled")}),$("body").addClass("blur-disabled"),$("body").removeClass("blur-enabled"),void($(".modal__object-photo").length>0&&setTimeout(function(){$(".modal__object-photo img").attr("src",""),$(".modal__object-photo img").css({width:"auto"}),$(".modal__object-photo").css({width:"auto"})},100))):(hideModal($(".modal__agreement")),0)}function truncText(t,e){$(t).length>0&&$(t).each(function(){$(this).text($(this).text().trunc(e))})}function showTab(t,e,a){$pos=t.parent().find(".tab-name").eq(e-1).position().top,a?(t.css({"max-height":"366px"}),t.parent().css({"padding-bottom":"0"}),t.parent().find(".tab-name").siblings().css({"margin-top":"0"}),t.siblings().css({top:"0"}),t.parent().find(".tab-name").eq(e).css({"margin-top":t.outerHeight()}),$pos=t.parent().find(".tab-name").eq(e-1).position().top,t.css({top:t.parent().find(".tab-name").eq(e-1).outerHeight()+$pos}),$wrongPos=+t.css("top").slice(0,-2),$heightSum=0,$heightSum+=$(".tab-name.active").outerHeight(),$(".tab-name.active").prevAll(".tab-name").each(function(){$heightSum+=$(this).outerHeight()}),$wrongPos>$heightSum&&t.css({top:+t.css("top").slice(0,-2)-t.outerHeight()}),0===t.next().length&&(t.parent().css({"padding-bottom":t.outerHeight()}),$wrongPos>$heightSum?($lastpos=+$(".prices__tabs").innerHeight()-t.outerHeight()-($wrongPos-$heightSum),t.css({top:$lastpos})):$lastpos=+$(".prices__tabs").innerHeight()-t.outerHeight())):t.css($pos+t.outerHeight()>$(".prices__tabs").outerHeight()?{bottom:"0","max-height":$(".prices__tabs").outerHeight()}:{top:$pos})}function resize(t,e){e.each(function(){$(this).children("img").height()<t.innerHeight()&&$(this).children("img").parent().addClass("resized")})}$(function(){String.prototype.trunc=function(t){return this.substr(0,t-1)+(this.length>t?"...":"")},$(".modal__object-photo").on("click",function(){hideOverlay(),setTimeout(function(){$(".modal__object-photo img").attr("src",""),$(".modal__object-photo img").css({width:"auto"}),$(".modal__object-photo").css({width:"auto"}),$(".modal__object-photo img").css({height:"auto"})},100)}),$(".articles-list").length>0&&(truncText(".article .article__annotation",200),truncText(".article .article__title",50),$(window).width()<1400&&(truncText(".article .article__annotation",100),truncText(".article .article__title",60))),$(".feedback__slide").length>0&&(truncText(".slide__text",225),$(window).width()<1200&&truncText(".slide__text",120)),$(window).on("resize",function(){$(window).width()<1200&&truncText(".slide__text",120),$(window).width()<840&&truncText(".article .article__annotation",100)}),$(window).on("scroll",function(){$(".mobile-header").offset().top>0?$(".mobile-header").addClass("mobile-header_blue-bg"):$(".mobile-header").removeClass("mobile-header_blue-bg"),$("#about").length>0&&($("aside a:last").offset().top>$("#header").height()&&$("aside a:last").offset().top<$("#about").offset().top?$("aside nav").removeClass("white-color"):$("aside a:last").offset().top>$("#feedback").offset().top?$("aside nav").removeClass("white-color"):$("aside nav").addClass("white-color")),$(".object__gallery").length>0&&($("aside a:last").offset().top>$(".object__gallery").offset().top?$("aside nav").removeClass("white-color"):$("aside nav").addClass("white-color")),$(".articles-list").length>0&&($("aside a:last").offset().top>$(".articles-list").offset().top?$("aside nav").removeClass("white-color"):$("aside nav").addClass("white-color")),$(".article-text").length>0&&($("aside a:last").offset().top>$(".article-text").offset().top?$("aside nav").removeClass("white-color"):$("aside nav").addClass("white-color")),$(".objects-list__object").length>0&&($("aside a:last").offset().top>$(".objects-section").offset().top?$("aside nav").removeClass("white-color"):$("aside nav").addClass("white-color")),$(".prices__tabs").length>0&&($("aside a:last").offset().top>$(".prices-section").offset().top?$("aside nav").removeClass("white-color"):$("aside nav").addClass("white-color")),$(".contacts #contacts-section").length>0&&($("aside a:last").offset().top>$("#contacts-section").offset().top?$("aside nav").removeClass("white-color"):$("aside nav").addClass("white-color")),$(".annotation").length>0&&($("aside a:last").offset().top>$(".annotation").offset().top?$("aside nav").removeClass("white-color"):$("aside nav").addClass("white-color"))}),$(".feedback__slider").length>0&&$(".feedback__slider").owlCarousel({navText:[$(".feedback__left-arrow"),$(".feedback__right-arrow")],nav:!0,center:!0,loop:!0,responsive:{0:{items:1,margin:20},454:{margin:20,items:1},840:{items:2,margin:20},1400:{items:2,margin:32}}}),$(".object__photo a").simpleLightbox(),$(".order-btn").on("click",function(t){t.preventDefault(),$("html, body").stop().animate({scrollTop:$(".calculate-cost").offset().top},700)}),$(".photos__slider").length>0&&$(".photos__slider").owlCarousel({navText:[$(".photos__left-arrow"),$(".photos__right-arrow")],nav:!0,center:!0,loop:!0,dots:!1,lazyload:!0,responsive:{0:{items:1,margin:20},454:{margin:20,items:1},840:{items:2,margin:20},1400:{items:3,margin:20}},onInitialized:function(){resize($(".detail .photos__slider"),$(".detail .photos__slide"))},onResized:function(){resize($(".detail .photos__slider"),$(".detail .photos__slide"))}}),$(".arrow").on("mouseenter",function(){$(this).addClass("arrow--hover")}),$(".arrow").on("mouseleave",function(){$(this).removeClass("arrow--hover")}),$("aside li").on("click",function(){$(this).hasClass("services")||($(this).addClass("active"),$(this).siblings().removeClass("active"))}),$(".tab-name").each(function(t){$(this).attr("data-num",t+1)}),$(".tab-content").each(function(t){$(this).attr("data-num",t+1)}),$(".tab-content:first").addClass("active"),$(".tab-name:first").addClass("active"),$(window).on("resize",function(){$(".tab-content").length>0&&($num=0,$num=$(".tab-content.active").data("num"),$(window).width()>840?($(".tab-content").css({left:String($(".tab-name").outerWidth()+"px")}),setTimeout(function(){showTab($(".tab-content.active"),$(".tab-content.active").data("num"),!1)},100),$(".tab-name").each(function(){$(this).css({"margin-top":"0"})})):($(".tab-content").css({left:"0"}),setTimeout(function(){showTab($(".tab-content.active"),$(".tab-content.active").data("num"),!0)},100)))}),$(window).width()<840&&$(".tab-content").length>0&&($(".tab-content:first").css({top:$(".tab-name:first").outerHeight()}),$(".tab-name").eq(1).css({"margin-top":$(".tab-content:first").outerHeight()})),$(window).width()<454&&$(".tab-content").length>0&&($(".tab-content:last").parent().css({"padding-bottom":$(".tab-content:last").outerHeight()}),$(".tab-content:last").css({top:+$(".tab-content:last").css("top").slice(0,-2)-$(".tab-name:last").outerHeight()})),$(".tab-name").on("click",function(){$currentTab=$(this),$(this).hasClass("active")&&$(".tab-name.active").position().top+$(".tab-content.active").outerHeight()<$(".prices__tabs").outerHeight()?($(this).next().css({"margin-top":"0"}),$(this).removeClass("active"),$(".tab-content.active").css({top:"0"}),$(".tab-content.active").removeClass("active"),0===$(this).next().length&&$(".prices__tabs").css({"padding-bottom":"0"})):$(this).hasClass("active")&&$(".tab-name.active").position().top+$(".tab-content.active").outerHeight()>$(".prices__tabs").outerHeight()?($(this).next().css({"margin-top":"0"}),$(this).removeClass("active"),$(".tab-content.active").css({bottom:"0"}),$(".tab-content.active").removeClass("active")):$(".tab-content").each($(window).width()<840?function(){$currentTab.data("num")==$(this).data("num")&&($(this).addClass("active"),$(this).siblings(".tab-content").removeClass("active"),$currentTab.addClass("active"),$currentTab.siblings().removeClass("active"),showTab($(this),$currentTab.data("num"),!0))}:function(){$currentTab.data("num")==$(this).data("num")&&($(this).addClass("active"),$(this).siblings(".tab-content").removeClass("active"),$currentTab.addClass("active"),$currentTab.siblings().removeClass("active"),showTab($(this),$currentTab.data("num"),!1))})}),$("aside .services, .all-services, .mobile-menu .services").on("click",function(t){$modServ=$(".modal__services"),showOverlay(),$modServ.removeClass("modal--disabled"),$modServ.css("opacity","0"),$modServ.animate({right:"0",opacity:"1"}),t.preventDefault()}),$(".modal-services__back").on("click",function(){$modServ=$(".modal__services"),hideOverlay(),$modServ.animate({right:"-100vw",opacity:"0"},200,function(){$modServ.addClass("modal--disabled")})}),$(".overlay").on("click",hideOverlay),$(".callback__close").on("click",function(){$(".modal__callback").animate({top:"-50vh",opacity:"0"},200,function(){$(this).addClass("modal--disabled")}),hideOverlay()}),$(".slide__show-all").on("click",function(t){showOverlay(),showModal($(".modal__original")),t.preventDefault()}),$(".original__close").on("click",function(){hideOverlay(),hideModal($(".modal__original"))}),$(".callback-btn, .mobile-header .phone").on("click",function(t){$modCallb=$(".modal__callback"),showOverlay(),$modCallb.css({opacity:"0"}).removeClass("modal--disabled").animate({opacity:"1"},200),$modCallb.animate({top:"50%"},200),t.preventDefault()}),$(".agreement, .callback__footer a").on("click",function(t){showOverlay(),showModal($(".modal__agreement")),t.preventDefault()}),$(".agreement__close").on("click",function(){hideOverlay(),hideModal($(".modal__agreement"))}),$(".mobile-menu").on("click",function(){$(this).hasClass("active")?$(".mobile-menu__menu").fadeOut(200,function(){$(this).parent().removeClass("active")}):($(this).addClass("active"),$(".mobile-menu__menu").fadeIn(200))}),$(".burger").on("click",function(t){t.preventDefault()}),$(".contacts__map").length>0&&ymaps.ready(function(){var t=new ymaps.Map("map",{center:[55.76063180708024,37.74575785974119],zoom:16,controls:[]},{searchControlProvider:"yandex#search"}),e=new ymaps.Placemark([55.760851099950635,37.75161043981168],{},{iconLayout:"default#image",iconImageHref:"/assets/img/icons/location.png",iconImageSize:[68,68],iconImageOffset:[-12,0]});t.geoObjects.add(e),t.behaviors.disable("scrollZoom"),t.container.fitToViewport(),$(window).width()<840&&t.setCenter([55.76268109995063,37.751920345723])})});